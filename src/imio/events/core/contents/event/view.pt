<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/@@main_template/macros/master"
      i18n:domain="imio.smartweb">
<body>

<metal:main fill-slot="main">

    <h1 class="documentFirstHeading" tal:content="context/Title" />

    <p class="documentDescription" tal:content="structure context/@@description" />
    <tal:check tal:condition="view/has_leadimage"
               tal:define="scale_func context/@@images;
                           scaled_image python: getattr(context.aq_explicit, 'image', False) and scale_func.scale('image', scale='large')">
        <img tal:replace="structure python: scaled_image.tag(css_class='figure-img img-fluid')" />
    </tal:check>

    <tal:def tal:define="data nocall:view/data">
        <div id="parent-fieldname-text" tal:condition="data/text">
          <tal:text content="structure data/text" />
        </div>

        <div class="event clearfix" itemscope itemtype="https://schema.org/Event">
            <ul class="hiddenStructure">
              <li><a itemprop="url" class="url" href="" tal:attributes="href data/url" tal:content="data/url">url</a></li>
              <li itemprop="name" class="summary" tal:content="data/title">title</li>
              <li itemprop="startDate" class="dtstart" tal:content="data/start/isoformat">start</li>
              <li itemprop="endDate" class="dtend" tal:content="data/end/isoformat">end</li>
              <li itemprop="description" class="description" tal:content="data/description">description</li>
            </ul>
        </div>
        <tal:eventsummary replace="structure context/@@event_summary"/>
    </tal:def>
    <ul>
        <li>
          <span i18n:translate="">Free entry</span>:
          <span i18n:translate="" itemprop="free-entry" class="free-entry" tal:content="python:'Yes' if context.free_entry else 'No'">free entry</span></li>
        <li>
          <span i18n:translate="">Facilities for person with reduced mobility</span>:
          <span i18n:translate="" itemprop="reduced-mobility-facilities" class="reduced-mobility-facilities" tal:content="python:'Yes' if context.reduced_mobility_facilities else 'No'">Facilities for person with reduced mobility</span></li>
        <li>
          <span i18n:translate="">Ticket url</span>:
          <span itemprop="ticket-url" class="ticket-url"><a target="_blank" href="" tal:attributes="href context/ticket_url" tal:content="context/ticket_url">Ticket url</a></span></li>
        <li>
          <span i18n:translate="">Facebook</span>
          <span itemprop="facebook" class="facebook"><a target="_blank" href="" tal:attributes="href context/facebook" tal:content="context/facebook">Facebook</a></span></li>
        <li>
          <span i18n:translate="">Twitter</span>:
          <span itemprop="twitter" class="twitter"><a target="_blank" href="" tal:attributes="href context/twitter" tal:content="context/twitter">Twitter</a></span></li>
        <li>
          <span i18n:translate="">Instagram</span>:
          <span itemprop="instagram" class="instagram"><a target="_blank" href="" tal:attributes="href context/instagram" tal:content="context/instagram">Instagram</a></span></li>
        <li>
          <span i18n:translate="">Online participation</span>:
          <span itemprop="online-participation" class="online-participation"><a target="_blank" href="" tal:attributes="href context/online_participation" tal:content="context/online_participation">Online participation</a></span></li>
        <li tal:condition="context/category">
          <span i18n:translate="">Category</span>:
          <span itemprop="category" class="category" tal:content="view/category">category</span></li>
        <li tal:condition="context/topics">
          <span i18n:translate="">Topics</span>:
          <span itemprop="topics" class="topic" tal:content="python:view.topics()">topics</span></li>
        <li tal:condition="context/iam">
          <span i18n:translate="">I am</span>:
          <span itemprop="iam" class="iam" tal:content="python:view.iam()">iam</span></li>
        <li tal:condition="context/subjects">
          <span i18n:translate="">Search</span>:
          <span tal:repeat="subject context/subjects" itemprop="subject" class="subject" tal:content="subject">subject</span></li>
    </ul>

    <div class=""
         tal:condition="context/video_url"
         tal:content="structure view/get_embed_video" />

    <div tal:define="images view/images;
                     thumb_scale string:preview"
         tal:condition="images"
         class="flexbin flexbin-margin">
        <tal:images tal:repeat="item images">
            <a class="spotlight gallery_item"
               tal:attributes="href string:${item/absolute_url}/@@images/image/large;
                               title item/title;
                               data-description item/description">
              <img tal:attributes="src string:${item/absolute_url}/@@images/image/${thumb_scale};
                                   alt item/title;
                                   title item/title" />
            </a>
        </tal:images>
    </div>
    <div class="event-files"
         tal:define="files view/files"
         tal:condition="files">
        <ul>
            <li tal:repeat="item files">
                <div tal:define="file_view nocall:item/@@file_view;
                                 item_has_image item/image | nothing;
                                 thumb_scale view/get_thumb_scale_list;
                                 image_scale item/@@images;">
                    <a tal:attributes="href item/absolute_url;
                                       alt item/title">
                        <span>
                            <img class="mime-icon"
                                 tal:attributes="src file_view/get_mimetype_icon">
                            <span tal:content="item/title">Item Title</span>
                            <span class="discreet">&mdash; <span tal:replace="file_view/human_readable_size" /></span>
                        </span>
                        <p><span tal:replace="item/description" /></p>
                        <img tal:condition="item_has_image"
                             tal:replace="structure python:image_scale.tag('image', scale=thumb_scale)" />
                    </a>
                </div>
            </li>
        </ul>
    </div>
</metal:main>
</body>
</html>
